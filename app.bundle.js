(()=>{"use strict";var t,e={320:(t,e,i)=>{var n=i(569);i(972),i(409),i(928),i(132);const s="assets/images/textures/",o=".jpg",r={GRASS:s+"grass"+o,PAPER:s+"paper"+o,STONE:s+"stone"+o,WALLBRICK:s+"wall-brick"+o,WOODEN:s+"wooden"+o};function c(t){const e=t.toString(16);return 1==e.length?"0"+e:e}function a(t,e){e&&Object.keys(e).length&&Object.keys(e).forEach((i=>{const n=e[i];t.setAttribute(i,n)}))}function h(t){const e=document.createElement("a-gui-flex-container");return a(e,{"flex-direction":"column","justify-content":"center","align-items":"normal","component-padding":"0.1",opacity:"0.7",width:"0.8",height:"0.25",position:"0 0 0.05 0"}),a(e,t),e}function l(t,e){const i=document.createElement("a-gui-label");return a(i,{width:"1",height:"0.2",value:t,"font-family":"assets/fonts/PressStart2P-Regular.ttf","font-size":"80px",margin:"0 0 0.05 0",opacity:"0.8","font-color":"white","background-color":"#363184"}),a(i,e),i}function u(t){let e=document.createElement("a-gui-button");return a(e,{width:"0.2",height:"0.2","font-size":"80px","font-color":"white","background-color":"#606e9e","hover-color":"#8791af",opacity:"0.8"}),a(e,t),e}function d(t){let e=document.createElement("a-gui-toggle");return a(e,{width:"0.7",height:"0.2","font-size":"70px","font-color":"white",margin:"0 0 0.05 0",opacity:"0.8","background-color":"#50687d"}),a(e,t),e}function p(t,e){const i=l("Opacity",{margin:"-0.05 0 0.15 0"});t.appendChild(i);const n=function(t){let e=document.createElement("a-gui-slider");return a(e,{width:"1",height:"0.25",percent:"0.5",margin:"0 0 0.05 0",opacity:"0.8","slider-bar-height":"0.01","handle-outer-radius":"0.1","handle-inner-radius":"0.07","background-color":"#50687d"}),a(e,t),e}({percent:"0.3"}),s="slideOpacity"+(new Date).getTime();n.setAttribute("onclick",s),window[s]=function(t,i){t.stopPropagation(),t instanceof CustomEvent&&e.setOpacity(i)},t.appendChild(n)}var f=i(486);const g={red:0,green:0,blue:0};let m,b,w,y;function v(t,e){b=t,m=e;const i=l("Color");b.appendChild(i),["red","green","blue"].forEach((t=>{!function(t){const e=h({"flex-direction":"row",margin:"0 0 0.01 0",width:"0.4",height:"0.2"});C(t,"decrease",e),C(t,"increase",e),b.appendChild(e)}(t)}))}function C(t,e,i){const n=u({value:"increase"===e?"+":"-","background-color":t}),s=e+t+(new Date).getTime();n.setAttribute("onclick",s);const o=(0,f.cloneDeep)(m);window[s]=function(i){if(i.stopPropagation(),i instanceof CustomEvent){const i=25,r="increase"===e?i:-i,a=g[t]+r;a>=0&&a<=255&&(g[t]=a);const{red:h,green:l,blue:u}=g,d=(n=l,s=u,"#"+c(h)+c(n)+c(s));o.setColor(d)}var n,s},i.appendChild(n)}class A{constructor(){this.sceneFigures=new Array,this.multiselectEnable=!1,this.selectedFigures=new Array}static getInstance(){return A.instance||(A.instance=new A),A.instance}getSceneFigures(){return this.sceneFigures}setSceneFigures(t){this.sceneFigures=t}getMultiselectEnable(){return this.multiselectEnable}setMultiselectEnable(t){this.multiselectEnable=t}getSelectedFigures(){return this.selectedFigures}setSelectedFigures(t){this.selectedFigures=t}}function E(t,e){y=t,w=e;const i=l("Size");y.appendChild(i),function(){const t=h({"flex-direction":"row",margin:"0 0 0.05 0",width:"0.4",height:"0.2"});R("decrease",t),R("increase",t),y.appendChild(t)}()}function R(t,e){const i=u({value:"increase"===t?"+":"-"}),n=t+"size"+(new Date).getTime();i.setAttribute("onclick",n);const s=(0,f.cloneDeep)(w);window[n]=function(e){if(e.stopPropagation(),e instanceof CustomEvent){const e=.2,i="increase"===t?1+e:1-e,n=A.getInstance().getSelectedFigures();s?s.resize(i):!s&&n.length&&n.forEach((t=>t.resize(i)))}},e.appendChild(i)}const S=Object.keys(r);let k=0;class O{constructor(t){this.figure=t,this.createMenuContainer(),function(t,e){const i=u({value:"X",margin:"0 0 0.1 0","background-color":"#c41b1b"}),n="closeMenu"+(new Date).getTime();i.setAttribute("onclick",n),window[n]=function(t){t.stopPropagation(),t instanceof CustomEvent&&e.htmlRef.childNodes[0].setAttribute("visible","false")},t.appendChild(i)}(this.entityRef,t),v(this.entityRef,t),p(this.entityRef,t),E(this.entityRef,t),function(t,e){const i=d({value:"Wireframe"}),n="setWireframe"+(new Date).getTime();i.setAttribute("onclick",n),window[n]=function(t){if(t.stopPropagation(),t instanceof CustomEvent){const t="true"===e.htmlRef.getAttribute("wireframe");e.setWireframe(!t)}},t.appendChild(i)}(this.entityRef,t),function(t,e){const i=u({value:"Change texture",width:.8,margin:"0 0 0.05 0"}),n="changeTexture"+(new Date).getTime();i.setAttribute("onclick",n),window[n]=function(t){if(t.stopPropagation(),t instanceof CustomEvent){k=k+1>S.length-1?0:k+1;const t=S[k],i={src:r[t],roughness:1};e.setMaterial(i)}},t.appendChild(i)}(this.entityRef,t),function(t,e){const i=d({value:"Shadow"}),n="setShadow"+(new Date).getTime();i.setAttribute("onclick",n),window[n]=function(t){if(t.stopPropagation(),t instanceof CustomEvent){const t=e.htmlRef.getAttribute("shadow").receive;e.setShadow(!t)}},t.appendChild(i)}(this.entityRef,t),function(t,e){const i=u({value:"Clone",margin:"0 0 0.05 0",width:"0.5"}),n="closeMenu"+(new Date).getTime();i.setAttribute("onclick",n),window[n]=function(t){if(t.stopPropagation(),t instanceof CustomEvent){const t=document.querySelector("a-plane");!function(t,e){const i=t.cloneNode();i.setAttribute("position","0 0 0.5"),i.setAttribute("rotation","90 0 0"),e.appendChild(i)}(e.htmlRef,t)}},t.appendChild(i)}(this.entityRef,t)}createMenuContainer(){this.entityRef=h({width:"1.3",height:"3.5",position:"0 2.3 0","panel-color":"#93b2e8"}),this.figure.htmlRef.appendChild(this.entityRef),this.entityRef.setAttribute("visible","false")}}const M="selectable-custom";const x=A.getInstance();function T(t){const e=x.getSceneFigures(),i=x.getSelectedFigures(),n=Boolean(i.find((e=>e.htmlRef.innerHTML===t.innerHTML))),s=e.find((e=>e.htmlRef.innerHTML===t.innerHTML));n?(x.setSelectedFigures(i.filter((e=>e.htmlRef.innerHTML!==t.innerHTML))),t.setAttribute("color",s.color)):(i.push(s),t.setAttribute("color","cyan"))}function F(t){const e=Object.keys(t);let i="";return e.forEach((e=>{i+=`${e}: ${String(t[e])}; `})),i}function D(t,e,i){const n=document.createElement(t.primitive);n.setAttribute("position",e);Object.keys(t).forEach((e=>{"primitive"!==e&&("shadow"===e?n.setAttribute("shadow",`receive: ${t[e]}`):n.setAttribute(e,t[e]))})),n.setAttribute("class","selectable-superhands"),n.setAttribute(M,""),function(t){t.setAttribute("hoverable",""),t.setAttribute("grabbable",""),t.setAttribute("draggable","")}(n),function(t){t.setAttribute("event-set__hoveron","_event: hover-start; material.opacity: 0.8; transparent: true"),t.setAttribute("event-set__hoveroff","_event: hover-end; material.opacity: 1; transparent: false"),t.setAttribute("event-set__dragdrop","event: drag-drop"),t.setAttribute("event-set__dragon","_event: dragover-start;"),t.setAttribute("event-set__dragoff","_event: dragover-end;")}(n),i.appendChild(n),t.htmlRef=n,new O(t)}class P{constructor(t){this.color="white",this.shadow=!1,this.opacity=1,this.wireFrame=!1;const{primitive:e,id:i,color:n,material:s,shadow:o,opacity:r,wireFrame:c}=t;this.primitive=e,i&&(this.id=i),n&&(this.color=n),s&&(this.material=F(s)),o&&(this.shadow=o),r&&(this.opacity=r),c&&(this.wireFrame=c)}setColor(t){this.color=t,this.htmlRef.setAttribute("color",t)}setMaterial(t){this.material=t;const e=t&&F(t);"white"!==this.color&&this.setColor("white"),this.htmlRef.setAttribute("material",e)}setOpacity(t){this.opacity=t,this.htmlRef.setAttribute("opacity",t.toString())}resize(t){this.htmlRef.object3D.scale.multiplyScalar(t)}setWireframe(t){this.wireFrame=t,this.htmlRef.setAttribute("wireframe",String(t))}setShadow(t){this.shadow=t,this.htmlRef.setAttribute("shadow",`receive: ${t}`)}}class _ extends P{constructor(t){t.primitive="a-cone",super(t),this["radius-bottom"]=t["radius-bottom"],this.height=t.height}}class j extends P{constructor(t){const{height:e,radius:i}=t;t.primitive="a-cylinder",super(t),this.height=e,this.radius=i}}class L extends P{constructor(t){t.primitive="a-sphere",super(t),this.radius=t.radius}}class I extends P{constructor(t){const{height:e,width:i,depth:n}=t;t.primitive="a-box",super(t),this.height=e,this.width=i,this.depth=n}}class z extends P{constructor(t){const{height:e,width:i,rotation:n}=t;t.primitive="a-plane",super(t),this.height=e,this.width=i,this.rotation=n}}class W{constructor(){this.sceneEl=document.querySelector("a-scene")}static getInstance(){return W.instance||(W.instance=new W),W.instance}getSceneEl(){return this.sceneEl}}class H{constructor(t){this.primitive="a-entity",this.props=t,this.createLightEntity()}createLightEntity(){this.htmlRef=document.createElement(this.primitive),this.setLightConfig();W.getInstance().getSceneEl().appendChild(this.htmlRef)}setLightConfig(){if(this.htmlRef&&this.props&&Object.keys(this.props)){const t=Object.assign({},this.props),e=t.position;delete t.position;const i=F(t);this.htmlRef.setAttribute("light",i),this.htmlRef.setAttribute("position",e)}}setProps(t){t&&Object.keys(t)&&(this.props=t,this.setLightConfig())}setActive(t){t?this.setLightConfig():this.htmlRef.setAttribute("light","")}}class N{constructor(t,e){this.componentId="figures-palette",this.figures=e||new Array,this.appendPalette(t),setTimeout((()=>{!function(){const t={dependencies:["raycaster"],init:function(){const t=this.el;let e=null;const i=A.getInstance();this.el.addEventListener("click",(function(n){n.stopPropagation(),n instanceof MouseEvent&&(e?((new Date).getTime()-e<400&&(i.getMultiselectEnable()?T(t):t.childNodes[0].setAttribute("visible","true")),e=null):e=(new Date).getTime())}))}};(0,n.registerComponent)(M,t)}();const{x:t,y:e,z:i}=this.entityRef.getAttribute("position");this.figures.forEach(((e,i)=>{D(e,t+2-(i+1)+" 0 0",this.entityRef)}))}),0)}appendPalette(t){const e=W.getInstance().getSceneEl();this.entityRef=document.createElement("a-entity"),this.entityRef.setAttribute("id",this.componentId),Object.keys(t).forEach((e=>{this.entityRef.setAttribute(e,t[e])})),e.appendChild(this.entityRef)}}class ${constructor(){this.createMenuContainer();const t=l("Scene");this.entityRef.appendChild(t),function(t){const e=d({value:"Multiselect"}),i="setWireframe"+(new Date).getTime();e.setAttribute("onclick",i);const n=A.getInstance();window[i]=function(t){if(t.stopPropagation(),t instanceof CustomEvent){const t=n.getMultiselectEnable();n.setMultiselectEnable(!t)}},t.appendChild(e)}(this.entityRef);const e=l("Multi");this.entityRef.appendChild(e),E(this.entityRef,null)}createMenuContainer(){this.entityRef=h({width:"1.3",height:"1.5",position:"-2.5 1 4.5",rotation:"0 90 0"});W.getInstance().getSceneEl().appendChild(this.entityRef)}}document.addEventListener("DOMContentLoaded",(function(t){console.log("DOM fully loaded");const e=W.getInstance().getSceneEl(),i=A.getInstance();new H({type:"directional",castShadow:!0,intensity:.98,shadowCameraVisible:!1,position:"1 2 1.8"});D(new z({height:1,width:2,rotation:"-90 0 0",material:{src:r.WOODEN,roughness:1}}),"-0.8 0.01 1.8",e);const n=[new _({"radius-bottom":.3,height:.8,color:"red"}),new j({radius:.3,height:.8,color:"blue"}),new L({radius:.3,color:"yellow"}),new I({height:.5,width:.5,depth:.5,color:"green"})];new N({position:"0 0.5 0",rotation:"0 0 0"},n),i.setSceneFigures(n),new $}))}},i={};function n(t){var s=i[t];if(void 0!==s)return s.exports;var o=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,t=[],n.O=(e,i,s,o)=>{if(!i){var r=1/0;for(h=0;h<t.length;h++){for(var[i,s,o]=t[h],c=!0,a=0;a<i.length;a++)(!1&o||r>=o)&&Object.keys(n.O).every((t=>n.O[t](i[a])))?i.splice(a--,1):(c=!1,o<r&&(r=o));c&&(t.splice(h--,1),e=s())}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[i,s,o]},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={143:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var s,o,[r,c,a]=i,h=0;for(s in c)n.o(c,s)&&(n.m[s]=c[s]);for(a&&a(n),e&&e(i);h<r.length;h++)o=r[h],n.o(t,o)&&t[o]&&t[o][0](),t[r[h]]=0;n.O()},i=self.webpackChunkaframe_editor_scene=self.webpackChunkaframe_editor_scene||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var s=n.O(void 0,[705],(()=>n(320)));s=n.O(s)})();